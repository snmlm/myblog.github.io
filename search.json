[{"title":"Hexo博客+spfk主题+LiveRe评论+Github pages","url":"%2F2018%2F09%2F28%2FHexo%2Bspfk%2BLiveRe%2BGithub_pages%2F","content":" <meta name=\"referrer\" content=\"no-referrer\" />\n### 动机\n刚接触Blog，觉得很新鲜，选择一个免费空间来写。\n<!-- more -->\n[Github](https://github.com/)是一个全世界程序员聚集的地方，大家相互分享自己写的代码，提升别人，也提升自己。\n先说说Github pages服务搭建博客的好处：\n\n* 免费\n* 免费\n* 免费\n\n再说说Hexo的优点：\n\n* 生成纯静态网页，访问速度快\n* 没有数据库，迁移很方便\n* 免费\n\n在评论系统上选用LiveRe：\n\n* 大佬级的disqus评论系统在墙外（沉默一会），需要vpn\n* 多说、网易云已躺\n* 搜狐畅言需要域名备案，免费的我怎么可能有域名，所以直接忽略\n* 原生评论系统？？？hexo没有数据库，怎么弄。。。\n* gitment是github的，没弄明白\n* 友言，登陆不上\n\n看来看去，LiveRe还能用，虽然bug比较多，网络连接比较差。爱折腾的我们，会找到更好的。\n\n### 安装Git Bash\n我的是windows环境，所以下载windows版本并安装就可以了。<br/>\n\n* [下载地址](https://gitforwindows.org/)\n* 下载exe，打开之后，一路下一步就好了\n* 安装好后，打开gitbash\n\n![](https://i.imgur.com/0Piax8M.png)\n\n* 找不到gitbash的小伙伴，右键空白处就能看到\n\n![](https://i.imgur.com/4Vl2Alk.png)\n\n* 或者在所有程序中找到Git文件夹\n\n![](https://i.imgur.com/IRIO9Mr.png)\n\n* 查看当前安装的版本\n\n```\ngit version\n```\n\n![](https://i.imgur.com/AczxU7z.png)\n\n### 安装NodeJs\nHexo是基于nodeJS环境的静态博客，里面的npm工具很有用啊，所以还是老老实实把这玩意儿装了吧\n\n* [下载地址](https://nodejs.org/en/)（说明：LTS为长期支持版，Current为当前最新版）\n* 安装步骤：反正下载好msi文件后，双击打开安装，也是一路next，不过在Custom Setup这一步记得选`Add to PATH` ,这样你就不用自己去配置电脑上环境变量了，装完在按 `win + r` 快捷键调出运行，然后输入cmd确定，在cmd中输入path可以看到你的node是否配置在里面（环境变量），没有的自行问度娘吧。\n\n```\nnode -v\n```\n\n![](https://i.imgur.com/aDLESxv.png)\n\n### 安装hexo\n安装上面两个软件后，后面的东西就不需要我们自己手动下载了，因为用gitbash中npm工具就能完成。\n\n* 首先需要找个地方来存放你的blog，在电脑的某个地方创建文件夹。\n* 在gitbash中用`cd`进入该文件中，并执行命令,默认安装在c盘下，想修改安装路径的小伙伴，请自行百度。\n\n```\nnpm i -g hexo\n```\n\n* 安装后查看版本,命令：\n\n```\nhexo -v\n```\n\n![](https://i.imgur.com/wZviLTe.png)\n\n* 随后我们进行blog的初始化，命令：\n\n```\nhexo init\n```\n\n![](https://i.imgur.com/2PnsrRt.png)\n\n* 说明一下各个文件的作用：\n  * node_modules：是依赖包\n  * public：存放的是生成的页面\n  * scaffolds：命令生成文章等的模板\n  * source：用命令创建的各种文章\n  * themes：主题\n  * _config.yml：整个博客的配置\n  * db.json：source解析所得到的\n  * package.json：项目所需模块项目的配置信息\n* 到这一步，架子算是搭好了，剩下的就是一些个性化的配置了\n\n### 搭桥到github\n把创建好的blog项目部署到github上并用github page\n\n* 首先需要有github账号，如果没有，请自行百度，注册很简单。\n* 有了账号，并登陆后创建一个repo,名称为`yourname.github.io`,其中yourname是你github的名称，操作如下：\n\n![](https://i.imgur.com/ChdyWrM.png)\n\n![](https://i.imgur.com/CgGsKyy.png)\n\n* 点击`Create repository`即可\n* 回到gitbash中，配置github账户信息(`YourName`和`YourEmail`填写你们自己的)\n\n```\ngit config --global user.name \"YourName\"\ngit config --global user.email \"YourEmail\"\n```\n\n* 创建ssh\n* 在gitbash中输入以下命令，需要输入密码,生成ssh密钥。然后进入C:\\Users\\用户名\\.ssh,进入此文件夹，找到`id_rsa.pub`文件，查看里面的内容\n \n```\nssh-keygen -t rsa -C \"youremail\"\n```\n\n* 登陆github：\n\n![](https://i.imgur.com/HW6wNvt.png)\n![](https://i.imgur.com/RWn2wyh.png)\n\n* 点击`New SSH key`\n\n![](https://i.imgur.com/P04VMJ8.png)\n\n* title随便起，key值填入id_rsa.pub文件内的内容，点击`Add SSH key`即可\n* 在gitbash中校验是否添加成功,命令：\n\n```\nssh -T git@github.com\n```\n\n### 把blog关联到github中\n\n* 打开blog项目，修改`_config.yml`文件中的一些配置,在文档字下面添加下面的代码，冒号后面有一个英文的空格,\n\n``` \ndeploy:\n    type: git\n    repo: git@github.com:YourgithubName/YourgithubName.github.io.git\n    branch: master\n```\n* 回到gitbash中，进入你的本地blog目录，执行下面命令：\n```\nhexo clean\nhexo g\nhexo s\n```\n> 注：`hexo 3.0`把服务器独立成个别模块，需要单独安装：\n```\nnpm i hexo-server\n```\n\n* 打开浏览器，输入：`http://localhost:4000`\n* 你就可以看到hexo自带主题的页面了\n\n### 部署到github\n\n* 先安装插件,只有安装这个，才能部署到github中\n\n```\nnpm install hexo-deployer-git --save\n```\n\n* 执行命令：\n\n```\nhexo clean\nhexo g\nhexo s\n```\n> `hexo d`的时候，会让输入生成ssh时候输入的密码。\n\n* 部署成功后，访问`http://yourgithubname.github.io`,就可以看见了\n\n### 修改主题为spfk\n\n* hexo默认的是主题是`landscape`,我用的是spfk的主题。\n* 在gitbash中进入你的blog所在的文件夹，输入以下命令\n\n```\ngit clone https://github.com/luuman/hexo-theme-spfk.git themes/spfk\n```\n\n* 下载完成后，修改blog下的`_confing.yml`文件，将`theme`属性修改成`spfk`,改成其他主题，操作类似\n* 如果主题需要更新的话，在gitbash中,进入主题所在文件夹，在`blog\\themes`中，名字对应的文件\n\n```\ngit pull\n```\n\n* 更换完后，重新加载和部署即可\n\n### 添加LiveRe评论系统\n\n* 首先进入[LiveRe](https://livere.com/)\n* 进行注册，注册完成\n* 点击安装，选择`City版`，喜欢付费的小伙伴，可以选择`Premium版`，点击`现在安装`\n* 根据自身的需求进行一些设置\n* 绑定网址，生成代码\n* 在管理界面左侧找到代码管理，把一般网站里的代码粘贴出来，命名为`livere.ejs`\n* 放到`blog\\themes\\spfk\\layout\\_partial\\comments`\n\n![](https://i.imgur.com/9D3XRNo.png)\n\n\n* 由于spfk主题下没有LiveRe评论系统的，所以要手动进行添加\n* 打开文件`hexo\\themes\\spfk\\layout\\_partial`下的`article.ejs`文件\n\n![](https://i.imgur.com/r3QFah0.png)\n\n* 找到`if (!index && post.comments){`这里添加以下代码\n\n```\n<%  if (theme.livere.on) { %>\n    <%- partial('comments/livere') %>\n<% } %>\n```\n\n![](https://i.imgur.com/YnPSlWX.png)\n\n* 打开spfk主题配置文件`hexo\\themes\\spfk`下的`_config.yml`添加以下代码,`Yourid`的值时LiveRe代码中的`data-uid`的值\n\n```\nlivere:\n    on: true\n    livere_uid: Yourid\n```\n\n![](https://i.imgur.com/3Sqc0NV.png)\n\n* 由于主题中还有其他的评论系统，把其他评论系统全部注释掉即可\n\n### 最后\n\n* 执行编译和部署命令，将整合过后的项目部署到github上\n* 自己的小博客大功告成\n\n### 打完收工\n\n","tags":["hexo"],"categories":["开发工具"]}]